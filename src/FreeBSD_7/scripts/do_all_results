#!/bin/bash

echo

WHERE=$1
DRIVER=$2
OPTION=$3
DIR=~/alexandre-da/results/${DRIVER}_${OPTION}

[ ! -d results ] && mkdir results
[ ! -d ${DIR} ] && mkdir ${DIR}

sizes=$(for i in *_testsparam ; do echo ${i/_*/} ; done | sort -n)

for count  in 5000000 10000000 15000000
do 
	for size in ${sizes}
	do 
		FILE_NAME=${DIR}"/"${size}"_"${count}
		echo "========================================================================================" > ${FILE_NAME}
		echo " " >> ${FILE_NAME}
		echo "Driver: "${DRIVER} >> ${FILE_NAME}
		echo "Packet Size: "${size} >> ${FILE_NAME}
		echo "Packets Count: "${count} >> ${FILE_NAME}
		echo " " >> ${FILE_NAME}

		./compute_statistics ${WHERE} ${size} ${count} ${DRIVER} >> ${FILE_NAME}

		echo "Pkt size: "${size} " , count: "${count} " , file: "${FILE_NAME} "  -  done!"

		echo " " >> ${FILE_NAME}
		echo "========================================================================================" >> ${FILE_NAME}
		echo " " >> ${FILE_NAME}
		echo " " >> ${FILE_NAME}

	done 
done 

#for size in ${sizes}
#do 
#	./create_csv.sh ${DIR} ${size}
#done 

echo
echo "All results done!"
